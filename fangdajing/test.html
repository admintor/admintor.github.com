<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>放大镜</title>
	<style type="text/css">
		#canvas{
			width: 600px;
			height: 600px;
			border: 1px solid green;
		}
	</style>
</head>
<body>
	<div>
		<canvas id="canvas"></canvas>
	</div>
	<script type="text/javascript">
		var canvas=document.getElementById('canvas');
		var context=canvas.getContext('2d');
		function point(element,x,y){
			var box=element.getBoundingClientRect();
			//console.log(box);
			var cx=x-box.left;
			var cy=y-box.top;
			return {
				x:cx,
				y:cy
			};
		}

		//放大镜
	function getClip(context,x,y,r){
		//context.save();
		//开启新路径
		context.beginPath();
		//绘制切割使用路径
		context.arc(x,y,r,0,Math.PI*2,false);
		//context.rect(x,y,50,50);
		//绘图环境切割方法(扣范围的内容)
		context.stroke();
		context.clip();
		//context.restore();
		//console.log(context);
		context.closePath();
	}

		var img=new Image();
		img.src='miao.jpg';
		window.onload=function(){
			context.drawImage(img,0,0);
		}
			document.onmousemove=function(e){
				var e=e?e:window.event;
				context.clearRect(0,0,600,600);
				context.drawImage(img,0,0);
				var points=point(canvas,e.clientX,e.clientY);
				console.log(points.x-points.y);
				context.save();
				var r=30;
				getClip(context,points.x,points.y,r);
				context.drawImage(img,-points.x-r,-points.y-r,1280,1920);
				context.restore();
			}
		
	
	</script>
</body>
</html>